<!DOCTYPE html>
<html>
<head>
	<title>Formatter</title>
</head>
<body>
	<h1>Formatter</h1>
	<p>
		Многие языки программирования позволяют оформлять код бесчисленным количеством способов.
		И это скорее недостаток, чем достоинство.
		Поэтому разработаны многочисленные инструменты для обеспечения единого стиля кода.
		Например, <a href="https://prettier.io/docs/en/options.html" target="_blank">Prettier</a>.
	</p>
	<p>
		С одной стороны, дублирование функциональности этих инструментов схоже с изобретением велосипеда.
		Но с другой стороны, для пользователя гораздо удобнее, когда "из коробки" уже есть какой-то приемлемый результат.
		Поэтому здесь существует собственная подсистема форматирования кода, которая позволяет указать правила стиля для генерируемого кода.
		Основная разница от сторонних инструментов заключается в том, что у нас есть система таксонов, где содержится исчерпывающая информация о каждой экспортируемой конструкции.
	</p>
	<p>
		Правила форматирования задаются в виде конфиг-файла, который фактически управляет процессом генерации кода на том или ином языке.
	</p>
	<h2>Общая схема конвертации данных</h2>
	<ul>
		<li>Из wpp-файлов читается исходное описание и формируется структура wpp-таксонов</li>
		<li>Исходная структура копируестся в целевое сообщество</li>
		<li>Происходит трансформация целевой структуры. Например, добавляются конструкции импорта. Или работа с объектами ядра, ведь в каждом языке свои функции работы со строками и массивами.</li>
		<li>Далее таксонами выполняется экспорт в виде потока лексем. Но уже на этом этапе используется информация из конфига.
		Например, в ряде языков кавычки для строк могут быть двойные или одинарные.</li>
		<li>Затем форматтер преобразует поток лексем в список текстовых строк</li>
		<li>Текстовые строки сохраняются в файле</li>
	</ul>
	<h2>Конфигурация</h2>
	<p>
		Каждый язык в принципе имеет свои настройки. Но есть довольно много совпадений. Поэтому они все унифицированы.
	</p>
	<p>
		Настроек довольно много. Поэтому для каждого языка есть пресеты. А если надо что-то поменять для конкретного проекта, то гораздо проще переопределить только нужное.
	</p>
</body>
</html>